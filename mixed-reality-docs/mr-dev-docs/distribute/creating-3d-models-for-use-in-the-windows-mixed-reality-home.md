---
title: 创建在主页中使用的 3D 模型
description: 在 HoloLens 和沉浸式 (VR) 耳机上，适用于在 Windows Mixed Reality 主页中使用的三维模型的资产要求和创作指南。
author: thmignon
ms.author: thmignon
ms.date: 03/21/2018
ms.topic: article
keywords: 3D，建模，建模指南，资产需求，创作准则，启动器，3D 启动器，纹理，材料，复杂性，三角形，网格，多边形，polycount，限制，混合现实耳机，windows mixed reality 耳机，虚拟现实耳机
ms.openlocfilehash: fb2f2718497781a2d38a0a061016e146ff077488
ms.sourcegitcommit: 4f3ef057a285be2e260615e5d6c41f00d15d08f8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/17/2020
ms.locfileid: "94703463"
---
# <a name="create-3d-models-for-use-in-the-home"></a><span data-ttu-id="6d667-104">创建在主页中使用的 3D 模型</span><span class="sxs-lookup"><span data-stu-id="6d667-104">Create 3D models for use in the home</span></span>

<span data-ttu-id="6d667-105">[Windows Mixed Reality 主页](../discover/navigating-the-windows-mixed-reality-home.md)是用户在启动应用程序之前居住的起点。</span><span class="sxs-lookup"><span data-stu-id="6d667-105">The [Windows Mixed Reality home](../discover/navigating-the-windows-mixed-reality-home.md) is the starting point where users land before launching applications.</span></span> <span data-ttu-id="6d667-106">你可以为 Windows Mixed Reality 耳机设计应用程序，将 [3d 模型用作应用启动器](implementing-3d-app-launchers.md) ，并允许 [将3d 深层链接放入应用内的 Windows Mixed Reality 主页](implementing-3d-app-launchers.md#3d-deep-links-secondarytiles) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-106">You can design your application for Windows Mixed Reality headsets to leverage a [3D model as an app launcher](implementing-3d-app-launchers.md) and to allow [3D deep links to be placed into the Windows Mixed Reality home](implementing-3d-app-launchers.md#3d-deep-links-secondarytiles) from within your app.</span></span> <span data-ttu-id="6d667-107">本文概述了用于创建与 Windows Mixed Reality 主页兼容的3D 模型的准则。</span><span class="sxs-lookup"><span data-stu-id="6d667-107">This article outlines the guidelines for creating 3D models compatible with the Windows Mixed Reality home.</span></span>

## <a name="asset-requirements-overview"></a><span data-ttu-id="6d667-108">资产要求概述</span><span class="sxs-lookup"><span data-stu-id="6d667-108">Asset requirements overview</span></span>
<span data-ttu-id="6d667-109">为 Windows Mixed Reality 创建3D 模型时，所有资产都必须满足一些要求：</span><span class="sxs-lookup"><span data-stu-id="6d667-109">When creating 3D models for Windows Mixed Reality there are some requirements that all assets must meet:</span></span> 
1. <span data-ttu-id="6d667-110">[导出](#exporting-models) -资产必须以 glb 文件格式提供， (二进制 glTF) </span><span class="sxs-lookup"><span data-stu-id="6d667-110">[Exporting](#exporting-models) - Assets must be delivered in the .glb file format (binary glTF)</span></span>
2. <span data-ttu-id="6d667-111">[建模](#modeling-guidelines) -资产必须小于10000个三角形，每个 LOD 不超过64个节点和 32 submeshes</span><span class="sxs-lookup"><span data-stu-id="6d667-111">[Modeling](#modeling-guidelines) - Assets must be less than 10k triangles, have no more than 64 nodes and 32 submeshes per LOD</span></span>
3. <span data-ttu-id="6d667-112">[材料](#material-guidelines) -纹理不能大于 4096 x 4096，并且最小 mip 映射在任一维度上都不应大于4</span><span class="sxs-lookup"><span data-stu-id="6d667-112">[Materials](#material-guidelines) - Textures cannot be larger than 4096 x 4096 and the smallest mip map should be no larger than 4 on either dimension</span></span>
4. <span data-ttu-id="6d667-113">[动画](#animation-guidelines) -动画的长度不能超过20分钟，长度为 30 FPS (36000 关键帧) 并且必须包含 <= 8192 变形目标顶点</span><span class="sxs-lookup"><span data-stu-id="6d667-113">[Animation](#animation-guidelines) - Animations cannot be longer than 20 minutes at 30 FPS (36,000 keyframes) and must contain <= 8192 morph target vertices</span></span>
5. <span data-ttu-id="6d667-114">[优化](#optimizations) -资产应使用 [WindowsMRAssetConverter](https://github.com/Microsoft/glTF-Toolkit/releases)进行优化。</span><span class="sxs-lookup"><span data-stu-id="6d667-114">[Optimizing](#optimizations) - Assets should be optimized using the [WindowsMRAssetConverter](https://github.com/Microsoft/glTF-Toolkit/releases).</span></span> <span data-ttu-id="6d667-115">这是 **WINDOWS 操作系统版本 <= 1709 必需** 的，建议在 windows 操作系统版本 >= 1803 上使用。</span><span class="sxs-lookup"><span data-stu-id="6d667-115">This is **required on Windows OS Versions <= 1709** and recommended on Windows OS versions >= 1803</span></span>

<span data-ttu-id="6d667-116">本文的其余部分详细介绍了这些要求，并提供了其他指导原则，以确保你的模型与 Windows Mixed Reality 主页良好合作。</span><span class="sxs-lookup"><span data-stu-id="6d667-116">The rest of this article includes a detailed overview of these requirements as well as additional guidelines to ensure your models work well with the Windows Mixed Reality home.</span></span> 

## <a name="detailed-guidance"></a><span data-ttu-id="6d667-117">详细指南</span><span class="sxs-lookup"><span data-stu-id="6d667-117">Detailed guidance</span></span>

### <a name="exporting-models"></a><span data-ttu-id="6d667-118">导出模型</span><span class="sxs-lookup"><span data-stu-id="6d667-118">Exporting models</span></span>

<span data-ttu-id="6d667-119">Windows Mixed Reality 主页需要使用带有嵌入图像和二进制数据的 glb 文件格式来传送3D 资产。</span><span class="sxs-lookup"><span data-stu-id="6d667-119">The Windows Mixed Reality home expects 3D assets to be delivered using the .glb file format with embedded images and binary data.</span></span> <span data-ttu-id="6d667-120">Glb 是 glTF 格式的二进制版本，它是 Khronos 组维护的用于3D 资产交付的版税免费开放标准。</span><span class="sxs-lookup"><span data-stu-id="6d667-120">Glb is the binary version of the glTF format which is a royalty free open standard for 3D asset delivery maintained by the Khronos group.</span></span> <span data-ttu-id="6d667-121">由于 glTF 演变为可互操作的3D 内容的行业标准，因此 Microsoft 将跨 Windows 应用和体验提供格式支持。</span><span class="sxs-lookup"><span data-stu-id="6d667-121">As glTF evolves as an industry standard for interoperable 3D content so will Microsoft’s support for the format across Windows apps and experiences.</span></span> <span data-ttu-id="6d667-122">如果尚未创建 glTF 资产，你可以在 glTF 工作组 github 页上找到 [受支持的导出程序和转换器的列表](https://github.com/KhronosGroup/glTF/blob/master/README.md#converters-and-exporters) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-122">If you haven't created a glTF asset before you can find a [list of supported exporters and converters](https://github.com/KhronosGroup/glTF/blob/master/README.md#converters-and-exporters) on the glTF working group github page.</span></span>  

### <a name="modeling-guidelines"></a><span data-ttu-id="6d667-123">建模准则</span><span class="sxs-lookup"><span data-stu-id="6d667-123">Modeling guidelines</span></span>

<span data-ttu-id="6d667-124">Windows 应使用以下建模准则生成资产，以确保与混合现实主体验兼容。</span><span class="sxs-lookup"><span data-stu-id="6d667-124">Windows expects assets to be generated using the following modeling guidelines to ensure compatibility with the Mixed Reality home experience.</span></span> <span data-ttu-id="6d667-125">当你选择的程序中的建模时，请牢记以下建议和限制：</span><span class="sxs-lookup"><span data-stu-id="6d667-125">When modeling in your program of your choice keep in mind the following recommendations and limitations:</span></span>
1. <span data-ttu-id="6d667-126">向上轴应设置为 "Y"。</span><span class="sxs-lookup"><span data-stu-id="6d667-126">The Up axis should be set to “Y”.</span></span>
2. <span data-ttu-id="6d667-127">资产应正面朝正 Z 轴 "前进"。</span><span class="sxs-lookup"><span data-stu-id="6d667-127">The asset should face “forward” towards the positive Z axis.</span></span>
3. <span data-ttu-id="6d667-128">所有资产都应在场景原点 (0，0，0) 上构建。</span><span class="sxs-lookup"><span data-stu-id="6d667-128">All assets should be built on the ground plane at the scene origin (0,0,0)</span></span>
4. <span data-ttu-id="6d667-129">应将工作单元设置为计量和资产，以便能够在全球范围内创作资产</span><span class="sxs-lookup"><span data-stu-id="6d667-129">Working Units should be set to meters and assets so that assets can be authored at world scale</span></span>
5. <span data-ttu-id="6d667-130">所有网格都不需要组合，但建议在目标为资源受限设备时使用</span><span class="sxs-lookup"><span data-stu-id="6d667-130">All meshes do not need to be combined but it is recommended if you are targeting resource constrained devices</span></span>
6. <span data-ttu-id="6d667-131">所有网格应共享1个材料，并且仅将一个纹理集用于整个资产</span><span class="sxs-lookup"><span data-stu-id="6d667-131">All meshes should share 1 material, with only 1 texture set being used for the whole asset</span></span>
7. <span data-ttu-id="6d667-132">在0-1 空间中，Uv-11 的布局必须按正方形排列。</span><span class="sxs-lookup"><span data-stu-id="6d667-132">UVs must be laid out in a square arrangement in the 0-1 space.</span></span> <span data-ttu-id="6d667-133">即使允许，也应避免使用平铺纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-133">Avoid tiling textures although they are permitted.</span></span>
8. <span data-ttu-id="6d667-134">不支持多 Uv-11</span><span class="sxs-lookup"><span data-stu-id="6d667-134">Multi-UVs are not supported</span></span>
9. <span data-ttu-id="6d667-135">不支持双面材料</span><span class="sxs-lookup"><span data-stu-id="6d667-135">Double sided materials are not supported</span></span>

### <a name="triangle-counts-and-levels-of-detail-lods"></a><span data-ttu-id="6d667-136">三角形计数和详细级别 (LODs) </span><span class="sxs-lookup"><span data-stu-id="6d667-136">Triangle counts and levels of detail (LODs)</span></span>

<span data-ttu-id="6d667-137">Windows Mixed Reality home 不支持超过10000个三角形的模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-137">The Windows Mixed Reality home does not support models with more than 10,000 triangles.</span></span> <span data-ttu-id="6d667-138">建议在导出前三角化网格，以确保它们不超过此计数。</span><span class="sxs-lookup"><span data-stu-id="6d667-138">It’s recommended that you triangulate your meshes before exporting to ensure that they do not exceed this count.</span></span> <span data-ttu-id="6d667-139">Windows MR 还支持 (LODs) 的可选几何级别详细信息，以确保高性能和优质的体验。</span><span class="sxs-lookup"><span data-stu-id="6d667-139">Windows MR also supports optional geometry levels of detail (LODs) to ensure a performant and high-quality experience.</span></span> <span data-ttu-id="6d667-140">[WindowsMRAssetConverter](https://github.com/Microsoft/glTF-Toolkit/releases) 将帮助你将模型的3个版本合并为 glb 模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-140">[The WindowsMRAssetConverter](https://github.com/Microsoft/glTF-Toolkit/releases) will help you combine 3 versions of your model into a single .glb model.</span></span> <span data-ttu-id="6d667-141">Windows 根据模型占用的屏幕实际空间量来确定要显示的 LOD。</span><span class="sxs-lookup"><span data-stu-id="6d667-141">Windows determines which LOD to display based on the amount of screen real estate the model is taking up.</span></span> <span data-ttu-id="6d667-142">仅支持3个 LOD 级别，并提供以下建议的三角形计数：</span><span class="sxs-lookup"><span data-stu-id="6d667-142">Only 3 LOD levels are supported with the following recommended triangle counts:</span></span>
<br>

|  <span data-ttu-id="6d667-143">LOD 级别</span><span class="sxs-lookup"><span data-stu-id="6d667-143">LOD Level</span></span>  |  <span data-ttu-id="6d667-144">推荐的三角形计数</span><span class="sxs-lookup"><span data-stu-id="6d667-144">Recommended Triangle Count</span></span>  |  <span data-ttu-id="6d667-145">最大三角形计数</span><span class="sxs-lookup"><span data-stu-id="6d667-145">Max Triangle Count</span></span> | 
|------|------|------|
|  <span data-ttu-id="6d667-146">LOD 0</span><span class="sxs-lookup"><span data-stu-id="6d667-146">LOD 0</span></span> |  <span data-ttu-id="6d667-147">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-147">10,000</span></span> |  <span data-ttu-id="6d667-148">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-148">10,000</span></span> | 
|  <span data-ttu-id="6d667-149">LOD 1</span><span class="sxs-lookup"><span data-stu-id="6d667-149">LOD 1</span></span> |  <span data-ttu-id="6d667-150">5,000</span><span class="sxs-lookup"><span data-stu-id="6d667-150">5,000</span></span>  |  <span data-ttu-id="6d667-151">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-151">10,000</span></span> | 
|  <span data-ttu-id="6d667-152">LOD 2</span><span class="sxs-lookup"><span data-stu-id="6d667-152">LOD 2</span></span> |  <span data-ttu-id="6d667-153">2,500</span><span class="sxs-lookup"><span data-stu-id="6d667-153">2,500</span></span>  |  <span data-ttu-id="6d667-154">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-154">10,000</span></span> | 

### <a name="node-counts-and-submesh-limits"></a><span data-ttu-id="6d667-155">节点计数和子网格限制</span><span class="sxs-lookup"><span data-stu-id="6d667-155">Node counts and submesh limits</span></span>
<span data-ttu-id="6d667-156">Windows Mixed Reality home 不支持每个 LOD 具有超过64个节点或 32 submeshes 的模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-156">The Windows Mixed Reality home does not support models with more than 64 nodes or 32 submeshes per LOD.</span></span> <span data-ttu-id="6d667-157">节点是 [glTF 规范](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy) 中定义场景中对象的概念。</span><span class="sxs-lookup"><span data-stu-id="6d667-157">Nodes are a concept in the [glTF specification](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy) that define the objects in the scene.</span></span> <span data-ttu-id="6d667-158">Submeshes 是在对象的网格上的 [基元](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#meshes) 数组中定义的。</span><span class="sxs-lookup"><span data-stu-id="6d667-158">Submeshes are defined in the array of [primitives](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#meshes) on the mesh in the object.</span></span> 

|  <span data-ttu-id="6d667-159">功能</span><span class="sxs-lookup"><span data-stu-id="6d667-159">Feature</span></span> |  <span data-ttu-id="6d667-160">说明</span><span class="sxs-lookup"><span data-stu-id="6d667-160">Description</span></span>  |  <span data-ttu-id="6d667-161">支持的最大值</span><span class="sxs-lookup"><span data-stu-id="6d667-161">Max Supported</span></span> | <span data-ttu-id="6d667-162">文档</span><span class="sxs-lookup"><span data-stu-id="6d667-162">Documentation</span></span> |
|------|------|------|------|
|  <span data-ttu-id="6d667-163">Nodes</span><span class="sxs-lookup"><span data-stu-id="6d667-163">Nodes</span></span> |  <span data-ttu-id="6d667-164">GlTF 场景中的对象</span><span class="sxs-lookup"><span data-stu-id="6d667-164">Objects in the glTF Scene</span></span> |  <span data-ttu-id="6d667-165">每 LOD 64</span><span class="sxs-lookup"><span data-stu-id="6d667-165">64 per LOD</span></span> | [<span data-ttu-id="6d667-166">这儿</span><span class="sxs-lookup"><span data-stu-id="6d667-166">Here</span></span>](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy)|
|  <span data-ttu-id="6d667-167">Submeshes</span><span class="sxs-lookup"><span data-stu-id="6d667-167">Submeshes</span></span> |  <span data-ttu-id="6d667-168">所有网格上的基元的总和</span><span class="sxs-lookup"><span data-stu-id="6d667-168">Sum of primitives on all meshes</span></span> |  <span data-ttu-id="6d667-169">每 LOD 32</span><span class="sxs-lookup"><span data-stu-id="6d667-169">32 per LOD</span></span> | [<span data-ttu-id="6d667-170">这儿</span><span class="sxs-lookup"><span data-stu-id="6d667-170">Here</span></span>](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#meshes)|

## <a name="material-guidelines"></a><span data-ttu-id="6d667-171">材料指导原则</span><span class="sxs-lookup"><span data-stu-id="6d667-171">Material guidelines</span></span>

<span data-ttu-id="6d667-172">应使用 .PBR 金属粗糙度工作流准备纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-172">Textures should be prepared using a PBR metal roughness workflow.</span></span> <span data-ttu-id="6d667-173">首先创建一组完整的纹理，其中包括 Albedo、Normal、封闭、金属和粗糙度。</span><span class="sxs-lookup"><span data-stu-id="6d667-173">Begin by creating a full set of textures including Albedo, Normal, Occlusion, Metallic, and Roughness.</span></span> <span data-ttu-id="6d667-174">Windows Mixed Reality 支持的纹理分辨率最高可达4096x4096，但建议你在512x512 中创作。</span><span class="sxs-lookup"><span data-stu-id="6d667-174">Windows Mixed Reality supports textures with resolutions up to 4096x4096 but its recommended that you author at 512x512.</span></span> <span data-ttu-id="6d667-175">此外，纹理应以4的倍数编写，因为这是在导出步骤中应用于纹理的压缩格式要求。</span><span class="sxs-lookup"><span data-stu-id="6d667-175">Additionally textures should be authored at resolutions in multiples of 4 as this is a requirement for the compression format applied to textures in the exporting steps outlined below.</span></span> <span data-ttu-id="6d667-176">最后，在生成 mip maps 或纹理时，最小 mip 必须最大为4x4。</span><span class="sxs-lookup"><span data-stu-id="6d667-176">Finally, when generating mip maps or a texture the lowest mip must be a maximum of 4x4.</span></span>
<br>

|  <span data-ttu-id="6d667-177">建议的纹理大小</span><span class="sxs-lookup"><span data-stu-id="6d667-177">Recommended Texture Size</span></span>  |  <span data-ttu-id="6d667-178">最大纹理大小</span><span class="sxs-lookup"><span data-stu-id="6d667-178">Max Texture Size</span></span> | <span data-ttu-id="6d667-179">最小 Mip</span><span class="sxs-lookup"><span data-stu-id="6d667-179">Lowest Mip</span></span>
|----|----|----|
|  <span data-ttu-id="6d667-180">512x512</span><span class="sxs-lookup"><span data-stu-id="6d667-180">512x512</span></span>  |  <span data-ttu-id="6d667-181">4096x4096</span><span class="sxs-lookup"><span data-stu-id="6d667-181">4096x4096</span></span> | <span data-ttu-id="6d667-182">最大4x4</span><span class="sxs-lookup"><span data-stu-id="6d667-182">max 4x4</span></span>|

### <a name="albedo-base-color-map"></a><span data-ttu-id="6d667-183">Albedo (基准颜色) 地图</span><span class="sxs-lookup"><span data-stu-id="6d667-183">Albedo (base color) map</span></span>

<span data-ttu-id="6d667-184">没有照明信息的原始颜色。</span><span class="sxs-lookup"><span data-stu-id="6d667-184">Raw color with no lighting information.</span></span> <span data-ttu-id="6d667-185">此地图还包含金属地图中金属 (白色的 reflectance 和漫射信息) 并分别在金属) 地图中 insulator (黑色黑色。</span><span class="sxs-lookup"><span data-stu-id="6d667-185">This map also contains the reflectance and diffuse information for metal (white in the metallic map) and insulator (black in the metallic map) surfaces respectively.</span></span>

### <a name="normal"></a><span data-ttu-id="6d667-186">普通</span><span class="sxs-lookup"><span data-stu-id="6d667-186">Normal</span></span>

<span data-ttu-id="6d667-187">相切空间正常映射</span><span class="sxs-lookup"><span data-stu-id="6d667-187">Tangent Space Normal map</span></span>

### <a name="roughness-map"></a><span data-ttu-id="6d667-188">粗糙度图</span><span class="sxs-lookup"><span data-stu-id="6d667-188">Roughness map</span></span>

<span data-ttu-id="6d667-189">描述对象的 microsurface。</span><span class="sxs-lookup"><span data-stu-id="6d667-189">Describes the microsurface of the object.</span></span> <span data-ttu-id="6d667-190">白色1.0 的黑色0.0 为平滑。</span><span class="sxs-lookup"><span data-stu-id="6d667-190">White 1.0 is rough Black 0.0 is smooth.</span></span> <span data-ttu-id="6d667-191">此地图为资产提供了真正描述表面的最多字符，例如划痕、指纹、涂抹、grime 等。</span><span class="sxs-lookup"><span data-stu-id="6d667-191">This map gives the asset the most character as it truly describes the surface e.g. scratches, fingerprints, smudges, grime etc.</span></span>

### <a name="ambient-occlusion-map"></a><span data-ttu-id="6d667-192">环境封闭映射</span><span class="sxs-lookup"><span data-stu-id="6d667-192">Ambient occlusion map</span></span>

<span data-ttu-id="6d667-193">值缩放图，描述封闭像素光线的区域，这些区域会阻塞反射</span><span class="sxs-lookup"><span data-stu-id="6d667-193">Value scale map depicting areas of occluded light which blocks reflections</span></span>

### <a name="metallic-map"></a><span data-ttu-id="6d667-194">金属图</span><span class="sxs-lookup"><span data-stu-id="6d667-194">Metallic map</span></span>

<span data-ttu-id="6d667-195">指示着色器（如果有）。</span><span class="sxs-lookup"><span data-stu-id="6d667-195">Tells the shader if something is metal or not.</span></span> <span data-ttu-id="6d667-196">Raw 金属 = 1.0 白色非金属色 = 0.0 黑色。</span><span class="sxs-lookup"><span data-stu-id="6d667-196">Raw Metal = 1.0 white Non metal = 0.0 black.</span></span> <span data-ttu-id="6d667-197">可能有一些过渡灰度值，这些值指示了诸如灰尘等原材料的内容，但通常情况下，此地图只应为黑色和白色。</span><span class="sxs-lookup"><span data-stu-id="6d667-197">There can be transitional gray values that indicate something covering the raw metal such as dirt, but in general this map should be black and white only.</span></span>

## <a name="optimizations"></a><span data-ttu-id="6d667-198">优化</span><span class="sxs-lookup"><span data-stu-id="6d667-198">Optimizations</span></span>

<span data-ttu-id="6d667-199">Windows Mixed Reality 主页在使用自定义扩展定义的核心 glTF 规范之上提供一系列优化。</span><span class="sxs-lookup"><span data-stu-id="6d667-199">Windows Mixed Reality home offers a series of optimizations on top of the core glTF spec defined using custom extensions.</span></span> <span data-ttu-id="6d667-200">Windows 版本 <为1709，并且建议在更高版本的 Windows 上执行这些优化。</span><span class="sxs-lookup"><span data-stu-id="6d667-200">These optimizations are required on Windows versions <= 1709 and recommended on newer versions of Windows.</span></span> <span data-ttu-id="6d667-201">可以使用 [GitHub 上提供的 Windows Mixed Reality 资产转换器](https://github.com/Microsoft/glTF-Toolkit/releases)轻松优化任何 glTF 2.0 模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-201">You can easily optimize any glTF 2.0 model using the [Windows Mixed Reality Asset Converter available on GitHub](https://github.com/Microsoft/glTF-Toolkit/releases).</span></span> <span data-ttu-id="6d667-202">此工具将执行下面指定的正确纹理打包和优化。</span><span class="sxs-lookup"><span data-stu-id="6d667-202">This tool will perform the correct texture packing and optimizations as specified below.</span></span> <span data-ttu-id="6d667-203">对于常规用法，我们建议使用 WindowsMRAssetConverter，但如果您需要更好地控制体验并想要生成自己的优化管道，则可以参阅下面的详细规范。</span><span class="sxs-lookup"><span data-stu-id="6d667-203">For general usage we recommend using the WindowsMRAssetConverter, but if you need more control over the experience and would like to build your own optimization pipeline then you can refer to the detailed specification below.</span></span>  

### <a name="materials"></a><span data-ttu-id="6d667-204">材料</span><span class="sxs-lookup"><span data-stu-id="6d667-204">Materials</span></span>

<span data-ttu-id="6d667-205">若要在混合现实环境中提高资产加载时间，Windows MR 支持根据此部分中定义的纹理打包方案来呈现打包的压缩 DDS 纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-205">To improve asset loading time in Mixed Reality environments Windows MR supports rendering compressed DDS textures packed according to the texture packing scheme defined in this section.</span></span> <span data-ttu-id="6d667-206">使用 [MSFT_texture_dds 扩展](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_texture_dds)来引用 DDS 纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-206">DDS textures are referenced using the [MSFT_texture_dds extension](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_texture_dds).</span></span> <span data-ttu-id="6d667-207">强烈建议使用压缩纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-207">Compressing textures is highly recommended.</span></span> 

#### <a name="hololens"></a><span data-ttu-id="6d667-208">HoloLens</span><span class="sxs-lookup"><span data-stu-id="6d667-208">HoloLens</span></span>

<span data-ttu-id="6d667-209">基于 HoloLens 的混合现实体验预期纹理使用2纹理设置进行打包，使用的封装规范如下：</span><span class="sxs-lookup"><span data-stu-id="6d667-209">HoloLens-based mixed reality experiences expect textures to be packed using a 2-texture setup using the following packing specification:</span></span>
<br>

|  <span data-ttu-id="6d667-210">glTF 属性</span><span class="sxs-lookup"><span data-stu-id="6d667-210">glTF Property</span></span>  |  <span data-ttu-id="6d667-211">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-211">Texture</span></span>  |  <span data-ttu-id="6d667-212">打包方案</span><span class="sxs-lookup"><span data-stu-id="6d667-212">Packing Scheme</span></span> | 
|----------|----------|----------|
|  <span data-ttu-id="6d667-213">pbrMetallicRoughness</span><span class="sxs-lookup"><span data-stu-id="6d667-213">pbrMetallicRoughness</span></span>  |  <span data-ttu-id="6d667-214">baseColorTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-214">baseColorTexture</span></span>  |  <span data-ttu-id="6d667-215">红色 (R) ，绿色 (G) ，蓝色 (B) </span><span class="sxs-lookup"><span data-stu-id="6d667-215">Red (R), Green (G), Blue (B)</span></span> | 
|  [<span data-ttu-id="6d667-216">MSFT_packing_normalRoughnessMetallic</span><span class="sxs-lookup"><span data-stu-id="6d667-216">MSFT_packing_normalRoughnessMetallic</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_normalRoughnessMetallic/README.md)  |  <span data-ttu-id="6d667-217">normalRoughnessMetallicTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-217">normalRoughnessMetallicTexture</span></span>  |  <span data-ttu-id="6d667-218">正常 (RG) ，粗糙度 (B) ，金属 () </span><span class="sxs-lookup"><span data-stu-id="6d667-218">Normal (RG), Roughness (B), Metallic (A)</span></span> | 


<span data-ttu-id="6d667-219">压缩 DDS 纹理时，每个映射上应有以下压缩：</span><span class="sxs-lookup"><span data-stu-id="6d667-219">When compressing the DDS textures the following compression is expected on each map:</span></span>
<br>

|  <span data-ttu-id="6d667-220">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-220">Texture</span></span>  |  <span data-ttu-id="6d667-221">预期压缩</span><span class="sxs-lookup"><span data-stu-id="6d667-221">Expected Compression</span></span> | 
|------|------|
|  <span data-ttu-id="6d667-222">baseColorTexture, normalRoughnessMetallicTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-222">baseColorTexture, normalRoughnessMetallicTexture</span></span> |  <span data-ttu-id="6d667-223">BC7</span><span class="sxs-lookup"><span data-stu-id="6d667-223">BC7</span></span> | 

#### <a name="immersive-vr-headsets"></a><span data-ttu-id="6d667-224">沉浸式 (VR) 耳机</span><span class="sxs-lookup"><span data-stu-id="6d667-224">Immersive (VR) headsets</span></span>

<span data-ttu-id="6d667-225">沉浸式 (VR 的基于 PC 的 Windows Mixed Reality 体验) 耳机预期纹理使用三纹理设置进行打包，使用的封装规范如下：</span><span class="sxs-lookup"><span data-stu-id="6d667-225">PC-based Windows Mixed Reality experiences for immersive (VR) headsets expect textures to be packed using a 3-texture setup using the following packing specification:</span></span>

##### <a name="windows-os--1803"></a><span data-ttu-id="6d667-226">Windows OS >= 1803</span><span class="sxs-lookup"><span data-stu-id="6d667-226">Windows OS >= 1803</span></span>

<br>

|  <span data-ttu-id="6d667-227">glTF 属性</span><span class="sxs-lookup"><span data-stu-id="6d667-227">glTF Property</span></span>  |  <span data-ttu-id="6d667-228">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-228">Texture</span></span>  |  <span data-ttu-id="6d667-229">打包方案</span><span class="sxs-lookup"><span data-stu-id="6d667-229">Packing Scheme</span></span> | 
|----------|----------|----------|
|  <span data-ttu-id="6d667-230">pbrMetallicRoughness</span><span class="sxs-lookup"><span data-stu-id="6d667-230">pbrMetallicRoughness</span></span>  |  <span data-ttu-id="6d667-231">baseColorTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-231">baseColorTexture</span></span>  |  <span data-ttu-id="6d667-232">红色 (R) ，绿色 (G) ，蓝色 (B) </span><span class="sxs-lookup"><span data-stu-id="6d667-232">Red (R), Green (G), Blue (B)</span></span> | 
|  [<span data-ttu-id="6d667-233">MSFT_packing_occlusionRoughnessMetallic</span><span class="sxs-lookup"><span data-stu-id="6d667-233">MSFT_packing_occlusionRoughnessMetallic</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  <span data-ttu-id="6d667-234">occlusionRoughnessMetallicTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-234">occlusionRoughnessMetallicTexture</span></span>  |  <span data-ttu-id="6d667-235">封闭 (R) ，粗糙度 (G) ，金属 (B) </span><span class="sxs-lookup"><span data-stu-id="6d667-235">Occlusion (R), Roughness (G), Metallic (B)</span></span> | 
|  [<span data-ttu-id="6d667-236">MSFT_packing_occlusionRoughnessMetallic</span><span class="sxs-lookup"><span data-stu-id="6d667-236">MSFT_packing_occlusionRoughnessMetallic</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  <span data-ttu-id="6d667-237">normalTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-237">normalTexture</span></span>  |  <span data-ttu-id="6d667-238">正常 (RG) </span><span class="sxs-lookup"><span data-stu-id="6d667-238">Normal (RG)</span></span> | 

<span data-ttu-id="6d667-239">压缩 DDS 纹理时，每个映射上应有以下压缩：</span><span class="sxs-lookup"><span data-stu-id="6d667-239">When compressing the DDS textures the following compression is expected on each map:</span></span>
<br>

|  <span data-ttu-id="6d667-240">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-240">Texture</span></span>  |  <span data-ttu-id="6d667-241">预期压缩</span><span class="sxs-lookup"><span data-stu-id="6d667-241">Expected Compression</span></span> | 
|------|------|
|  <span data-ttu-id="6d667-242">normalTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-242">normalTexture</span></span>  |  <span data-ttu-id="6d667-243">BC5</span><span class="sxs-lookup"><span data-stu-id="6d667-243">BC5</span></span> | 
|  <span data-ttu-id="6d667-244">baseColorTexture, occlusionRoughnessMetallicTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-244">baseColorTexture, occlusionRoughnessMetallicTexture</span></span>  |  <span data-ttu-id="6d667-245">BC7</span><span class="sxs-lookup"><span data-stu-id="6d667-245">BC7</span></span> | 

##### <a name="windows-os--1709"></a><span data-ttu-id="6d667-246">Windows OS <= 1709</span><span class="sxs-lookup"><span data-stu-id="6d667-246">Windows OS <= 1709</span></span>
<br>

|  <span data-ttu-id="6d667-247">glTF 属性</span><span class="sxs-lookup"><span data-stu-id="6d667-247">glTF Property</span></span>  |  <span data-ttu-id="6d667-248">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-248">Texture</span></span>  |  <span data-ttu-id="6d667-249">打包方案</span><span class="sxs-lookup"><span data-stu-id="6d667-249">Packing Scheme</span></span> | 
|----------|----------|----------|
|  <span data-ttu-id="6d667-250">pbrMetallicRoughness</span><span class="sxs-lookup"><span data-stu-id="6d667-250">pbrMetallicRoughness</span></span>  |  <span data-ttu-id="6d667-251">baseColorTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-251">baseColorTexture</span></span>  |  <span data-ttu-id="6d667-252">红色 (R) ，绿色 (G) ，蓝色 (B) </span><span class="sxs-lookup"><span data-stu-id="6d667-252">Red (R), Green (G), Blue (B)</span></span> | 
|  [<span data-ttu-id="6d667-253">MSFT_packing_occlusionRoughnessMetallic</span><span class="sxs-lookup"><span data-stu-id="6d667-253">MSFT_packing_occlusionRoughnessMetallic</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  <span data-ttu-id="6d667-254">roughnessMetallicOcclusionTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-254">roughnessMetallicOcclusionTexture</span></span>  |  <span data-ttu-id="6d667-255">粗糙度 (R) ，金属 (G) ，封闭 (B) </span><span class="sxs-lookup"><span data-stu-id="6d667-255">Roughness (R), Metallic (G), Occlusion (B)</span></span> | 
|  [<span data-ttu-id="6d667-256">MSFT_packing_occlusionRoughnessMetallic</span><span class="sxs-lookup"><span data-stu-id="6d667-256">MSFT_packing_occlusionRoughnessMetallic</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  <span data-ttu-id="6d667-257">normalTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-257">normalTexture</span></span>  |  <span data-ttu-id="6d667-258">正常 (RG) </span><span class="sxs-lookup"><span data-stu-id="6d667-258">Normal (RG)</span></span> | 

<span data-ttu-id="6d667-259">压缩 DDS 纹理时，每个映射上应有以下压缩：</span><span class="sxs-lookup"><span data-stu-id="6d667-259">When compressing the DDS textures the following compression is expected on each map:</span></span>
<br>

|  <span data-ttu-id="6d667-260">纹理</span><span class="sxs-lookup"><span data-stu-id="6d667-260">Texture</span></span>  |  <span data-ttu-id="6d667-261">预期压缩</span><span class="sxs-lookup"><span data-stu-id="6d667-261">Expected Compression</span></span> | 
|------|------|
|  <span data-ttu-id="6d667-262">normalTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-262">normalTexture</span></span>  |  <span data-ttu-id="6d667-263">BC5</span><span class="sxs-lookup"><span data-stu-id="6d667-263">BC5</span></span> | 
|  <span data-ttu-id="6d667-264">baseColorTexture, roughnessMetallicOcclusionTexture</span><span class="sxs-lookup"><span data-stu-id="6d667-264">baseColorTexture, roughnessMetallicOcclusionTexture</span></span> | <span data-ttu-id="6d667-265">BC7</span><span class="sxs-lookup"><span data-stu-id="6d667-265">BC7</span></span> |

### <a name="adding-mesh-lods"></a><span data-ttu-id="6d667-266">添加网格 LODs</span><span class="sxs-lookup"><span data-stu-id="6d667-266">Adding mesh LODs</span></span>

<span data-ttu-id="6d667-267">Windows MR 使用几何节点 LODs 根据屏幕覆盖情况在不同的详细级别中呈现3D 模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-267">Windows MR uses geometry node LODs to render 3D models in different levels of detail depending on screen coverage.</span></span> <span data-ttu-id="6d667-268">尽管此功能在技术上并不是必需的，但强烈建议将其用于所有资产。</span><span class="sxs-lookup"><span data-stu-id="6d667-268">While this feature is technically not required, it's strongly recommended for all assets.</span></span> <span data-ttu-id="6d667-269">目前，Windows 支持3个级别的详细信息。</span><span class="sxs-lookup"><span data-stu-id="6d667-269">Currently Windows supports 3 levels of detail.</span></span> <span data-ttu-id="6d667-270">默认 LOD 为0，表示最高质量。</span><span class="sxs-lookup"><span data-stu-id="6d667-270">The default LOD is 0, which represents the highest quality.</span></span> <span data-ttu-id="6d667-271">其他 LODs 按顺序编号，例如1、2，并且质量逐渐降低。</span><span class="sxs-lookup"><span data-stu-id="6d667-271">Other LODs are numbered sequentially, e.g. 1, 2 and get progressively lower in quality.</span></span> <span data-ttu-id="6d667-272">[Windows Mixed Reality 资产转换器](https://github.com/Microsoft/glTF-Toolkit/releases)支持生成满足此 LOD 规范的资产，方法是接受多个 glTF 模型并将它们合并到具有有效 LOD 级别的单个资产中。</span><span class="sxs-lookup"><span data-stu-id="6d667-272">The [Windows Mixed Reality Asset Converter](https://github.com/Microsoft/glTF-Toolkit/releases) supports generating assets that meet this LOD specification by accepting multiple glTF models and merging them into a single asset with valid LOD levels.</span></span> <span data-ttu-id="6d667-273">下表概述了预期的 LOD 排序和三角形目标：</span><span class="sxs-lookup"><span data-stu-id="6d667-273">The following table outlines the expected LOD ordering and triangle targets:</span></span>
<br>

|  <span data-ttu-id="6d667-274">LOD 级别</span><span class="sxs-lookup"><span data-stu-id="6d667-274">LOD Level</span></span>  |  <span data-ttu-id="6d667-275">推荐的三角形计数</span><span class="sxs-lookup"><span data-stu-id="6d667-275">Recommended Triangle Count</span></span>  |  <span data-ttu-id="6d667-276">最大三角形计数</span><span class="sxs-lookup"><span data-stu-id="6d667-276">Max Triangle Count</span></span> | 
|-------|-------|-------|
|  <span data-ttu-id="6d667-277">LOD 0</span><span class="sxs-lookup"><span data-stu-id="6d667-277">LOD 0</span></span> |  <span data-ttu-id="6d667-278">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-278">10,000</span></span> |  <span data-ttu-id="6d667-279">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-279">10,000</span></span> | 
|  <span data-ttu-id="6d667-280">LOD 1</span><span class="sxs-lookup"><span data-stu-id="6d667-280">LOD 1</span></span> |  <span data-ttu-id="6d667-281">5,000</span><span class="sxs-lookup"><span data-stu-id="6d667-281">5,000</span></span>  |  <span data-ttu-id="6d667-282">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-282">10,000</span></span> | 
|  <span data-ttu-id="6d667-283">LOD 2</span><span class="sxs-lookup"><span data-stu-id="6d667-283">LOD 2</span></span> |  <span data-ttu-id="6d667-284">2,500</span><span class="sxs-lookup"><span data-stu-id="6d667-284">2,500</span></span>  |  <span data-ttu-id="6d667-285">10,000</span><span class="sxs-lookup"><span data-stu-id="6d667-285">10,000</span></span> | 

<span data-ttu-id="6d667-286">当使用 LODs 时，始终指定3个 LOD 级别。</span><span class="sxs-lookup"><span data-stu-id="6d667-286">When using LODs always specify 3 LOD levels.</span></span> <span data-ttu-id="6d667-287">缺少 LODs 将导致模型不会意外呈现，因为 LOD 系统会切换到缺少的 LOD 级别。</span><span class="sxs-lookup"><span data-stu-id="6d667-287">Missing LODs will cause the model to not render unexpectedly as the LOD system switches to the missing LOD level.</span></span> <span data-ttu-id="6d667-288">glTF 2.0 当前不支持 LODs 作为核心规范的一部分，因此应使用 [MSFT_LOD 扩展](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod)来定义 LODs。</span><span class="sxs-lookup"><span data-stu-id="6d667-288">glTF 2.0 does not currently support LODs as part of the core spec. LODs should therefore be defined using the [MSFT_LOD extension](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod).</span></span>

### <a name="screen-coverage"></a><span data-ttu-id="6d667-289">屏幕覆盖范围</span><span class="sxs-lookup"><span data-stu-id="6d667-289">Screen coverage</span></span>

<span data-ttu-id="6d667-290">LODs 基于每个 LOD 上设置的屏幕覆盖值驱动的系统，在 Windows Mixed Reality 中显示。</span><span class="sxs-lookup"><span data-stu-id="6d667-290">LODs are displayed in Windows Mixed Reality based on a system driven by the screen coverage value set on each LOD.</span></span> <span data-ttu-id="6d667-291">当前耗用更大的屏幕空间部分的对象将显示在更高的 LOD 级别。</span><span class="sxs-lookup"><span data-stu-id="6d667-291">Objects that are currently consuming a larger portion of the screen space are displayed at a higher LOD level.</span></span> <span data-ttu-id="6d667-292">屏幕覆盖率不是 core glTF 2.0 规范的一部分，必须使用 [MSFT_lod 扩展](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod)的 "附加" 部分中 MSFT_ScreenCoverage 指定。</span><span class="sxs-lookup"><span data-stu-id="6d667-292">Screen coverage is not a part of the core glTF 2.0 spec and must be specified using MSFT_ScreenCoverage in the “extras” section of the [MSFT_lod extension](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod).</span></span>
<br>

|  <span data-ttu-id="6d667-293">LOD 级别</span><span class="sxs-lookup"><span data-stu-id="6d667-293">LOD Level</span></span>  |  <span data-ttu-id="6d667-294">建议范围</span><span class="sxs-lookup"><span data-stu-id="6d667-294">Recommended Range</span></span>  |  <span data-ttu-id="6d667-295">默认范围</span><span class="sxs-lookup"><span data-stu-id="6d667-295">Default Range</span></span> | 
|-------|-------|-------|
|  <span data-ttu-id="6d667-296">LOD 0</span><span class="sxs-lookup"><span data-stu-id="6d667-296">LOD 0</span></span>  |  <span data-ttu-id="6d667-297">100%-50%</span><span class="sxs-lookup"><span data-stu-id="6d667-297">100% - 50%</span></span> |  <span data-ttu-id="6d667-298">.5</span><span class="sxs-lookup"><span data-stu-id="6d667-298">.5</span></span> | 
|  <span data-ttu-id="6d667-299">LOD 1</span><span class="sxs-lookup"><span data-stu-id="6d667-299">LOD 1</span></span> |  <span data-ttu-id="6d667-300">低于 50%-20%</span><span class="sxs-lookup"><span data-stu-id="6d667-300">Under 50% - 20%</span></span>  |  <span data-ttu-id="6d667-301">.2</span><span class="sxs-lookup"><span data-stu-id="6d667-301">.2</span></span> | 
|  <span data-ttu-id="6d667-302">LOD 2</span><span class="sxs-lookup"><span data-stu-id="6d667-302">LOD 2</span></span> |  <span data-ttu-id="6d667-303">低于 20%-1%</span><span class="sxs-lookup"><span data-stu-id="6d667-303">Under 20% - 1%</span></span>  |  <span data-ttu-id="6d667-304">得出</span><span class="sxs-lookup"><span data-stu-id="6d667-304">.01</span></span> | 
|  <span data-ttu-id="6d667-305">LOD 4</span><span class="sxs-lookup"><span data-stu-id="6d667-305">LOD 4</span></span>  |  <span data-ttu-id="6d667-306">低于1%</span><span class="sxs-lookup"><span data-stu-id="6d667-306">Under 1%</span></span>  |  - | 

## <a name="animation-guidelines"></a><span data-ttu-id="6d667-307">动画指导原则</span><span class="sxs-lookup"><span data-stu-id="6d667-307">Animation guidelines</span></span>

> [!NOTE]
> <span data-ttu-id="6d667-308">此功能已作为 [Windows 10 2018 年4月更新](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/release-notes-april-2018)的一部分添加。</span><span class="sxs-lookup"><span data-stu-id="6d667-308">This feature was added as part of [Windows 10 April 2018 Update](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/release-notes-april-2018).</span></span> <span data-ttu-id="6d667-309">在较早版本的 Windows 上，这些动画将不会播放，但是，如果按照本文中的指南进行创作，它们仍会加载。</span><span class="sxs-lookup"><span data-stu-id="6d667-309">On older versions of Windows these animations will not play back, however, they will still load if authored according to the guidance in this article.</span></span>  

<span data-ttu-id="6d667-310">混合现实主页支持在 HoloLens 和沉浸式 (VR) 耳机上进行动画处理的 glTF 对象。</span><span class="sxs-lookup"><span data-stu-id="6d667-310">The mixed reality home supports animated glTF objects on HoloLens and immersive (VR) headsets.</span></span> <span data-ttu-id="6d667-311">如果要在模型上触发动画，则需要使用 glTF 格式的动画映射扩展。</span><span class="sxs-lookup"><span data-stu-id="6d667-311">If you wish to trigger animations on your model, you'll need to use the Animation Map extension on the glTF format.</span></span> <span data-ttu-id="6d667-312">此扩展使您可以基于用户在世界中的状态触发 glTF 模型中的动画，例如，当用户接近对象或正在查看动画时触发动画。</span><span class="sxs-lookup"><span data-stu-id="6d667-312">This extension lets you trigger animations in the glTF model based on the users presence in the world, for example trigger an animation when the user is close to the object or while they are looking at it.</span></span> <span data-ttu-id="6d667-313">如果 glTF 对象具有动画，但没有定义触发器，动画将不会播放。</span><span class="sxs-lookup"><span data-stu-id="6d667-313">If you glTF object has animations, but doesn't define triggers the animations will not be played back.</span></span> <span data-ttu-id="6d667-314">下面的部分介绍了一个用于将这些触发器添加到任何动画 glTF 对象的工作流。</span><span class="sxs-lookup"><span data-stu-id="6d667-314">The section below describes one workflow for adding these triggers to any animated glTF object.</span></span>

### <a name="tools"></a><span data-ttu-id="6d667-315">工具</span><span class="sxs-lookup"><span data-stu-id="6d667-315">Tools</span></span>
<span data-ttu-id="6d667-316">首先，下载以下工具（如果尚未这样做）。</span><span class="sxs-lookup"><span data-stu-id="6d667-316">First, download the following tools if you don't have them already.</span></span> <span data-ttu-id="6d667-317">通过这些工具，可以轻松地打开任何 glTF 模型、预览它、进行更改并将其另存为 glTF 或 glb：</span><span class="sxs-lookup"><span data-stu-id="6d667-317">These tools will make it easy to open any glTF model, preview it, make changes and save back out as glTF or .glb:</span></span>
1. [<span data-ttu-id="6d667-318">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="6d667-318">Visual Studio Code</span></span>](https://code.visualstudio.com/)
2. [<span data-ttu-id="6d667-319">用于 Visual Studio Code 的 glTF 工具</span><span class="sxs-lookup"><span data-stu-id="6d667-319">glTF Tools for Visual Studio Code</span></span>](https://marketplace.visualstudio.com/items?itemName=cesium.gltf-vscode)


### <a name="opening-and-previewing-the-model"></a><span data-ttu-id="6d667-320">打开和预览模型</span><span class="sxs-lookup"><span data-stu-id="6d667-320">Opening and previewing the model</span></span>
<span data-ttu-id="6d667-321">首先，通过将 glTF 文件拖到编辑器窗口中，在 VSCode 中打开 glTF 模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-321">Start by opening up the glTF model in VSCode by dragging the .glTF file into the editor window.</span></span> <span data-ttu-id="6d667-322">请注意，如果你有 glb 而不是 glTF 文件，则可以使用已下载的 glTF 工具加载项将其导入 VSCode。</span><span class="sxs-lookup"><span data-stu-id="6d667-322">Note that if you have a .glb instead of a .glTF file you can import it into VSCode using the glTF Tools addon that you downloaded.</span></span> <span data-ttu-id="6d667-323">中转到 "视图 > 命令面板"，然后在命令面板中开始键入 "glTF"，并选择 "glTF：从 glb 导入"，这会弹出一个文件选取器，以便你使用将 glb 导入。</span><span class="sxs-lookup"><span data-stu-id="6d667-323">Go to "View -> Command Palette" and then begin typing "glTF" in the command palette and select "glTF: Import from glb" which will pop up a file picker for you to import a .glb with.</span></span> 

<span data-ttu-id="6d667-324">打开 glTF 模型后，应会在编辑器窗口中看到 JSON。</span><span class="sxs-lookup"><span data-stu-id="6d667-324">Once you've opened your glTF model you should see the JSON in the editor window.</span></span> <span data-ttu-id="6d667-325">请注意，您还可以使用右键单击文件名称，然后从右键单击菜单中选择 "glTF： Preview 3D 模型" 命令快捷方式，使用在实时三维查看器中预览模型。</span><span class="sxs-lookup"><span data-stu-id="6d667-325">Note that you can also preview the model in a live 3D viewer using the by right clicking the file name and selecting the "glTF: Preview 3D Model" command shortcut from the right click menu.</span></span> 

### <a name="adding-the-triggers"></a><span data-ttu-id="6d667-326">添加触发器</span><span class="sxs-lookup"><span data-stu-id="6d667-326">Adding the triggers</span></span>
<span data-ttu-id="6d667-327">动画触发器使用动画映射扩展添加到 glTF 模型 JSON。</span><span class="sxs-lookup"><span data-stu-id="6d667-327">Animation triggers are added to glTF model JSON using the Animation Map extension.</span></span> <span data-ttu-id="6d667-328">此动画地图扩展 [在此处在 GitHub 上](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) 公开记录 (注意：这是一个草稿扩展) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-328">The animation map extension is publicly documented [here on GitHub](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) (NOTE: THIS IS A DRAFT EXTENSION).</span></span> <span data-ttu-id="6d667-329">若要将扩展添加到模型中，只需滚动到编辑器中的 glTF 文件的末尾，并将 "extensionsUsed" 和 "extension" 块添加到文件（如果它们尚不存在）。</span><span class="sxs-lookup"><span data-stu-id="6d667-329">To add the extension to your model just scroll to the end of the glTF file in the editor and add the "extensionsUsed" and "extensions" block to your file if they don't already exist.</span></span> <span data-ttu-id="6d667-330">在 "extensionsUsed" 部分中，你将添加对 "EXT_animation_map" 扩展的引用，在 "extension" 块中，你将向模型中的动画添加映射。</span><span class="sxs-lookup"><span data-stu-id="6d667-330">In the "extensionsUsed" section you'll add a reference to the "EXT_animation_map" extension and in the "extensions" block you'll add your mappings to the animations in the model.</span></span>

<span data-ttu-id="6d667-331">如 [规范中](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) 所述，使用 "动画" 列表中的 "语义" 字符串（动画索引数组）定义动画触发器。</span><span class="sxs-lookup"><span data-stu-id="6d667-331">As noted [in the spec](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) you define what triggers the animation using the "semantic" string on a list of "animations" which is an array of animation indices.</span></span> <span data-ttu-id="6d667-332">在下面的示例中，我们指定了在用户 gazing 对象时要播放的动画：</span><span class="sxs-lookup"><span data-stu-id="6d667-332">In the example below we've specified the animation to play while the user is gazing at the object:</span></span>

```json
  "extensionsUsed": [
    "EXT_animation_map"
  ],
  "extensions" : {
      "EXT_animation_map" : {
            "bindings": [
                {
                    "semantic": "GAZE",
                    "animations": [0]
                }
            ]
      }
  }
```
<span data-ttu-id="6d667-333">Windows Mixed Reality 主页支持以下动画触发语义。</span><span class="sxs-lookup"><span data-stu-id="6d667-333">The following animation triggers semantics are supported by the Windows Mixed Reality home.</span></span>  
* <span data-ttu-id="6d667-334">"始终"：不断循环播放动画</span><span class="sxs-lookup"><span data-stu-id="6d667-334">"ALWAYS": Constantly loop an animation</span></span>
* <span data-ttu-id="6d667-335">"已保留"：在整个期间内循环对象将被抓取。</span><span class="sxs-lookup"><span data-stu-id="6d667-335">"HELD": Looped during the entire duration an object is grabbed.</span></span>
* <span data-ttu-id="6d667-336">"注视"：在查看对象时循环</span><span class="sxs-lookup"><span data-stu-id="6d667-336">"GAZE": Looped  while an object is being looked at</span></span>
* <span data-ttu-id="6d667-337">"邻近性"：在查看器接近对象时循环</span><span class="sxs-lookup"><span data-stu-id="6d667-337">"PROXIMITY": Looped while a viewer is near to an object</span></span>
* <span data-ttu-id="6d667-338">"指向"：当用户指向对象时循环</span><span class="sxs-lookup"><span data-stu-id="6d667-338">"POINTING": Looped while a user is pointing at an object</span></span>

### <a name="saving-and-exporting"></a><span data-ttu-id="6d667-339">保存和导出</span><span class="sxs-lookup"><span data-stu-id="6d667-339">Saving and exporting</span></span>
<span data-ttu-id="6d667-340">对 glTF 模型进行更改后，可以直接将其保存为 glTF，也可以在编辑器中右键单击该文件的名称，并选择 "glTF： Export to GLB (二进制文件) " 以改为导出 GLB。</span><span class="sxs-lookup"><span data-stu-id="6d667-340">Once you've made the changes to your glTF model you can save it directly as glTF or you can right click the name of the file in the editor and select "glTF: Export to GLB (binary file)" to instead export a .glb.</span></span> 

### <a name="restrictions"></a><span data-ttu-id="6d667-341">限制</span><span class="sxs-lookup"><span data-stu-id="6d667-341">Restrictions</span></span>
<span data-ttu-id="6d667-342">动画的长度不能超过20分钟，并且不能包含36000个以上的关键帧 (20 分钟的 30 FPS) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-342">Animations cannot be longer than 20 minutes and cannot contain more than 36,000 keyframes (20 mins at 30 FPS).</span></span> <span data-ttu-id="6d667-343">此外，当使用基于平滑目标的动画时，不能超过8192的变形目标顶点。</span><span class="sxs-lookup"><span data-stu-id="6d667-343">Additionally when using morph target based animations do not exceed 8192 morph target vertices or less.</span></span> <span data-ttu-id="6d667-344">超过这些计数将导致动态资产在 Windows Mixed Reality 主页中不受支持。</span><span class="sxs-lookup"><span data-stu-id="6d667-344">Exceeding these count will cause the animated asset to be unsupported in the Windows Mixed Reality home.</span></span> 

|<span data-ttu-id="6d667-345">功能</span><span class="sxs-lookup"><span data-stu-id="6d667-345">Feature</span></span>|<span data-ttu-id="6d667-346">最大值</span><span class="sxs-lookup"><span data-stu-id="6d667-346">Maximum</span></span>|
|-----|-----|
|<span data-ttu-id="6d667-347">持续时间</span><span class="sxs-lookup"><span data-stu-id="6d667-347">Duration</span></span>|<span data-ttu-id="6d667-348">20 分钟</span><span class="sxs-lookup"><span data-stu-id="6d667-348">20 minutes</span></span>|
|<span data-ttu-id="6d667-349">关键帧</span><span class="sxs-lookup"><span data-stu-id="6d667-349">Keyframes</span></span>|<span data-ttu-id="6d667-350">36,000</span><span class="sxs-lookup"><span data-stu-id="6d667-350">36,000</span></span>| 
|<span data-ttu-id="6d667-351">变形目标顶点</span><span class="sxs-lookup"><span data-stu-id="6d667-351">Morph Target Vertices</span></span>|<span data-ttu-id="6d667-352">8192</span><span class="sxs-lookup"><span data-stu-id="6d667-352">8192</span></span>|

## <a name="gltf-implementation-notes"></a><span data-ttu-id="6d667-353">glTF 实现注释</span><span class="sxs-lookup"><span data-stu-id="6d667-353">glTF Implementation notes</span></span>
<span data-ttu-id="6d667-354">Windows MR 不支持使用负值刻度翻转几何。</span><span class="sxs-lookup"><span data-stu-id="6d667-354">Windows MR does not support flipping geometry using negative scales.</span></span> <span data-ttu-id="6d667-355">具有负刻度的几何可能会导致视觉对象。</span><span class="sxs-lookup"><span data-stu-id="6d667-355">Geometry with negative scales will likely result in visual artifacts.</span></span>

<span data-ttu-id="6d667-356">GlTF 资产必须指向使用 Windows MR 呈现的场景属性的默认场景。</span><span class="sxs-lookup"><span data-stu-id="6d667-356">The glTF asset MUST point to the default scene using the scene attribute to be rendered by Windows MR.</span></span> <span data-ttu-id="6d667-357">此外，windows [10 2018 年4月更新](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/release-notes-april-2018)之前的 Windows MR glTF 加载程序 **需要** 访问器：</span><span class="sxs-lookup"><span data-stu-id="6d667-357">Additionally the Windows MR glTF loader prior to the [Windows 10 April 2018 update](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/release-notes-april-2018) **requires** accessors:</span></span>
* <span data-ttu-id="6d667-358">必须具有最小值和最大值。</span><span class="sxs-lookup"><span data-stu-id="6d667-358">Must have min and max values.</span></span>
* <span data-ttu-id="6d667-359">类型标量必须是 componentType UNSIGNED_SHORT (5123) 或 UNSIGNED_INT (5125) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-359">Type SCALAR must be componentType UNSIGNED_SHORT (5123) or UNSIGNED_INT (5125).</span></span>
* <span data-ttu-id="6d667-360">类型 VEC2 和 VEC3 必须为 componentType FLOAT (5126) 。</span><span class="sxs-lookup"><span data-stu-id="6d667-360">Type VEC2 and VEC3 must be componentType FLOAT (5126).</span></span>

<span data-ttu-id="6d667-361">以下材料属性用于核心 glTF 2.0 规范，但不是必需的：</span><span class="sxs-lookup"><span data-stu-id="6d667-361">The following material properties are used from core glTF 2.0 spec but not required:</span></span>
* <span data-ttu-id="6d667-362">baseColorFactor, metallicFactor, roughnessFactor</span><span class="sxs-lookup"><span data-stu-id="6d667-362">baseColorFactor, metallicFactor, roughnessFactor</span></span>
* <span data-ttu-id="6d667-363">baseColorTexture：必须指向 dds 中存储的纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-363">baseColorTexture: Must point to a texture stored in dds.</span></span>
* <span data-ttu-id="6d667-364">emissiveTexture：必须指向 dds 中存储的纹理。</span><span class="sxs-lookup"><span data-stu-id="6d667-364">emissiveTexture: Must point to a texture stored in dds.</span></span>
* <span data-ttu-id="6d667-365">emissiveFactor</span><span class="sxs-lookup"><span data-stu-id="6d667-365">emissiveFactor</span></span>
* <span data-ttu-id="6d667-366">alphaMode</span><span class="sxs-lookup"><span data-stu-id="6d667-366">alphaMode</span></span>

<span data-ttu-id="6d667-367">以下材料属性将从核心规范中忽略：</span><span class="sxs-lookup"><span data-stu-id="6d667-367">The following material properties are ignored from core spec:</span></span>
* <span data-ttu-id="6d667-368">所有多 Uv-11</span><span class="sxs-lookup"><span data-stu-id="6d667-368">All Multi-UVs</span></span>
* <span data-ttu-id="6d667-369">metalRoughnessTexture：必须改用下面定义的 Microsoft 优化纹理包</span><span class="sxs-lookup"><span data-stu-id="6d667-369">metalRoughnessTexture: Must instead use Microsoft optimized texture packing defined below</span></span>
* <span data-ttu-id="6d667-370">normalTexture：必须改用下面定义的 Microsoft 优化纹理包</span><span class="sxs-lookup"><span data-stu-id="6d667-370">normalTexture: Must instead use Microsoft optimized texture packing defined below</span></span>
* <span data-ttu-id="6d667-371">normalScale</span><span class="sxs-lookup"><span data-stu-id="6d667-371">normalScale</span></span>
* <span data-ttu-id="6d667-372">occlusionTexture：必须改用下面定义的 Microsoft 优化纹理包</span><span class="sxs-lookup"><span data-stu-id="6d667-372">occlusionTexture: Must instead use Microsoft optimized texture packing defined below</span></span>
* <span data-ttu-id="6d667-373">occlusionStrength</span><span class="sxs-lookup"><span data-stu-id="6d667-373">occlusionStrength</span></span>

<span data-ttu-id="6d667-374">Windows MR 不支持基元模式行和点。</span><span class="sxs-lookup"><span data-stu-id="6d667-374">Windows MR does not support primitive mode lines and points.</span></span> 

<span data-ttu-id="6d667-375">仅支持单个 UV 顶点属性。</span><span class="sxs-lookup"><span data-stu-id="6d667-375">Only a single UV vertex attribute is supported.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="6d667-376">其他资源</span><span class="sxs-lookup"><span data-stu-id="6d667-376">Additional resources</span></span>
* [<span data-ttu-id="6d667-377">glTF 导出程序和转换器</span><span class="sxs-lookup"><span data-stu-id="6d667-377">glTF Exporters and Converters</span></span>](https://github.com/KhronosGroup/glTF#converters-and-exporters)
* [<span data-ttu-id="6d667-378">glTF 工具包</span><span class="sxs-lookup"><span data-stu-id="6d667-378">glTF Toolkit</span></span>](https://github.com/Microsoft/glTF-Toolkit)
* [<span data-ttu-id="6d667-379">glTF 2.0 规范</span><span class="sxs-lookup"><span data-stu-id="6d667-379">glTF 2.0 Specification</span></span>](https://github.com/KhronosGroup/glTF/blob/master/README.md)
* [<span data-ttu-id="6d667-380">Microsoft glTF LOD 扩展规范</span><span class="sxs-lookup"><span data-stu-id="6d667-380">Microsoft glTF LOD Extension Specification</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_lod/README.md)
* [<span data-ttu-id="6d667-381">电脑混合现实纹理封装扩展规范</span><span class="sxs-lookup"><span data-stu-id="6d667-381">PC Mixed Reality Texture Packing Extensions Specification</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)
* [<span data-ttu-id="6d667-382">HoloLens 混合现实纹理封装扩展规范</span><span class="sxs-lookup"><span data-stu-id="6d667-382">HoloLens Mixed Reality Texture Packing Extensions Specification</span></span>](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_normalRoughnessMetallic/README.md)
* [<span data-ttu-id="6d667-383">Microsoft DDS 纹理 glTF 扩展规范</span><span class="sxs-lookup"><span data-stu-id="6d667-383">Microsoft DDS Textures glTF extensions specification</span></span>](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds)

## <a name="see-also"></a><span data-ttu-id="6d667-384">另请参阅</span><span class="sxs-lookup"><span data-stu-id="6d667-384">See also</span></span>

* [<span data-ttu-id="6d667-385">实现 3D 应用启动器（UWP 应用）</span><span class="sxs-lookup"><span data-stu-id="6d667-385">Implement 3D app launchers (UWP apps)</span></span>](implementing-3d-app-launchers.md)
* [<span data-ttu-id="6d667-386">实现 3D 应用启动器（Win32 应用）</span><span class="sxs-lookup"><span data-stu-id="6d667-386">Implement 3D app launchers (Win32 apps)</span></span>](implementing-3d-app-launchers-win32.md)
* [<span data-ttu-id="6d667-387">导航 Windows Mixed Reality 主页</span><span class="sxs-lookup"><span data-stu-id="6d667-387">Navigating the Windows Mixed Reality home</span></span>](../discover/navigating-the-windows-mixed-reality-home.md)
