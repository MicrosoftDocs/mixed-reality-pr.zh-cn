---
title: 案例研究-HoloTour
description: 探索 HoloTour 应用程序案例研究，并演练捕获和创建内容的过程。
author: dannyaskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: HoloTour、HoloLens、Windows Mixed Reality
ms.openlocfilehash: 3e285988b6027b8c043dea7a4594c21d0bf3370d
ms.sourcegitcommit: 2329db5a76dfe1b844e21291dbc8ee3888ed1b81
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/08/2021
ms.locfileid: "98009317"
---
# <a name="case-study---holotour"></a>案例研究-HoloTour

HoloTour for Microsoft HoloLens 为世界各地的图标位置提供了沉浸式三维个人教程。 随着设计人员、艺术家、制造者、音频设计人员、开发人员、音频设计人员和开发人员的开发人员的研究，为众所周知的位置创建 convincingly 的真实三维呈现会使创意和技术赏识的独特融合。 此案例研究将指导您捕获和创建用于 HoloTour 的内容。

## <a name="the-tech"></a>技术人员

通过 HoloTour，我们想让人们能够访问世界上一些最精彩的目标，例如 [刻录的 Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) ，或在意大利的现代时代 [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) ，直接从他们自己的客厅。 我们的团队使其成为 "让你感到非常 HoloTour" 的目标。 不仅仅是图片或视频。 通过利用 HoloLens 的独特显示、跟踪和音频技术，我们认为我们可以将你与其他位置进行传输。 我们需要捕获我们访问的每个位置的堪萨斯州、声音和三维几何，然后在应用程序中重新创建。

为此，我们需要一个带有定向音频捕获的360的相机装置。 它需要在极高的分辨率下进行捕获，以便在 HoloLens 上播放时，该素材看起来很清晰，并且需要将相机放置在一起，以便最大程度地减少对项目的装订。 我们希望获得全部的球状，而不只是在范围内，而是在您的上方和下方。 远程测试机组还需要是可移植的，以便我们可以将其全部放在世界各地。 我们评估了现成的可用选项，并且认识到它们只是由于解决方案、成本或大小而没有太好。 如果找不到满足我们需求的相机远程测试机组，就必须自己构建。

### <a name="building-the-rig"></a>构建远程测试机组

第一个版本（从 cardboard、Velcro、管道磁带和 14 GoPro 相机进行）是 MacGyver 为你自豪的东西。 在查看从低端解决方案到自定义制造的工作区的所有内容之后，GoPro 摄像头最终是最佳选项，因为它们的价格较小且价格合理，并且具有易于使用的内存存储。 小型外形规格尤为重要，因为它允许我们将相机相对靠近一小，这就是摄像机之间的距离越小，就越小。 我们独特的相机排列使我们能够获得全部球体 *覆盖面，并使* 其具有足够的重叠，以便在处理过程中智能地对齐相机和平滑某些项目。

在 HoloLens 上利用 [空间音效](../design/spatial-sound.md) 功能对创建 convincingly 的真正沉浸式体验至关重要。 我们使用了位于其上的照相机下的四位麦克风阵列，它会在四个方向上从摄像机位置捕获声音，为我们提供了足够的信息在我们的场景中创建空间声音。

![我们在 Pantheon 外为与设置了360°相机远程测试机组。](images/camera-pantheon-200px.png)

我们在 Pantheon 外为与设置了360°相机远程测试机组。 


我们通过将自制的远程测试机组置于西雅图附近条的凸缘，并捕获徒步顶部的风景，对其进行了测试。 结果，尽管它比你目前在 HoloTour 中看到的位置显著得多，但我们相信，我们的远程测试机组设计确实足以使你感到满意。

我们已将从 Velcro 和 cardboard 的远程测试升级到3D 打印的摄像头架，并购买了 GoPro 相机的外部电池组，以简化电池管理。 然后，我们进行了更广泛的测试，将其向下传播到旧金山，以创建城市海岸和图标黄金入口桥的小型教程。 此照相机 rig 是我们在 HoloTour 中所访问位置的大多数捕获的功能。

![360°相机远程测试机组与 in Machu Picchu。](images/camera-machu-pichu-500px.png)

360°相机远程测试机组与 in Machu Picchu。 

## <a name="behind-the-scenes"></a>幕后

在与之前，我们需要找出要在虚拟教程中包括的位置。 罗马是我们打算交付的第一个位置，我们希望能够正确地进行操作，因此我们决定提前进行 scouting。 我们发送了六名人员（包括艺术家、设计人员和制造者）的团队，以供他人访问我们正在考虑的站点。 旅行时间大约为9天–2.5，旅行时剩余时间为与。 针对 Machu Picchu 的 (我们选择不执行侦察行程，预先研究并为与的几天时间 ) 。

在罗马期间，团队会为每个区域拍摄照片并记下一些有趣的事实，还会有一些值得注意的问题，例如，在每个位置上旅行的难度，以及由于 crowds 或限制而导致胶片的难度。 这可能听起来像度假，但却很多。 早上提前开始，将不会停止，直到晚上。 每夜，都将在西雅图上上传素材以供评审。 

![我们的捕获将在罗马中进行。](images/holotour-filming-crew-rome-500px.jpg) 

我们的捕获将在罗马中进行。 


在侦察行程完成后，将对实际的与进行最终计划。 这需要一个详细列表，其中介绍了电影的工作时间、日期和时间。 每日海外都是昂贵的，因此这些行程需要更高的效率。 我们以罗马的顺序预订了指南和处理程序，以帮助我们和在日落后从日出到一天的全天使用。 为了使你感到满意，我们需要获得最佳素材。

### <a name="capturing-the-video"></a>捕获视频

在捕获过程中执行几个简单的操作可以更方便地处理后处理问题。 例如，当你将多个照相机中的图像组合在一起时，最终会出现视觉对象，因为每个相机的视图略有不同。 相机上的对象越近，视图间的差别越大，而装订项目就越大。 下面是一个简单的方法来直观显示问题：使你的拇指正面朝上，只需一眼就能看到它。 立即切换眼睛。 您将看到您的拇指显示为相对于背景。 如果您从人脸上走着您的拇指，并重复试验，则您的拇指会显得更少。 这种明显的变动与我们所面临的缝合问题类似：你的眼睛（如相机）看不到完全相同的图像，因为它们之间用少许距离分隔。

因为在与时，要避免最坏的项目，而不是在后续处理中纠正它们，所以我们尝试使离照相机的人和东西离不上的时间变得更容易，因为这样可以避免需要缝合关闭对象。 围绕照相机保持很大的清除可能是在拍摄过程中遇到的最大挑战之一，我们不得不使其工作。 使用本地指南是管理 crowds 的巨大帮助，但我们还发现，使用符号（有时也是小型圆锥或 bean 包）来标记与空间相当有效，尤其是因为我们只需要在每个位置获取少量的素材。 获取良好捕获的最佳方式通常是在早上，在大多数人展示之前，只是在早上提前到达。

其他一些有用的捕获技术直接来自传统的电影实践。 例如，我们在所有相机上都使用了颜色更正卡，并捕获了以后可能需要的纹理和对象的参考照片。 

![显示颜色更正卡的 Machu Picchu 的粗略剪切。](images/rough-cut-machu-picchu-500px.png)

在进行装订之前，Pantheon 素材的粗略剪切。

### <a name="processing-the-video"></a>处理视频

捕获360°内容只是第一步，需要进行大量处理才能将捕获的原始照相机素材转换为你在 HoloTour 中看到的最终资产。 我们回到回家后，我们需要从14种不同的相机源拍摄视频，并将其转换为包含最少项目的单个连续视频。 我们的艺术团队使用多种工具来合并和修饰捕获的素材，我们开发了一个管道来尽可能优化处理。 这种素材必须拼接，颜色得到校正，然后才能消除分散的元素和项目，或者增加了生活和运动的补充口袋，而这一切都可以提高实际的效果。

![在进行装订之前，Pantheon 素材的粗略剪切。](images/rough-cut-pantheon-500px.png)

在进行装订之前，Pantheon 素材的粗略剪切。 


若要将视频汇聚在一起，我们使用了一个名为 [PTGui](https://www.ptgui.com/) 的工具，并将其集成到了处理管道中。 作为后期处理的一部分，我们从视频中提取了仍为帧的帧，并找到了一种对其中一帧非常适合的装订模式。 然后，将该模式应用到一个自定义的插件，我们编写这种方式，让我们的视频艺术家可以在组合后直接调整和调整装订模式。 

![显示拼接 Pantheon 素材的 PTGui 屏幕截图。](images/stitching-tool-pantheon-500px.png)

显示拼接 Pantheon 素材的 PTGui 屏幕截图。 


### <a name="video-playback"></a>视频播放

完成对素材的处理后，会获得一个无缝视频，但这种情况并不太大，而是围绕8K 的分辨率。 解码视频非常昂贵，并且很少有计算机可以处理8K 视频，因此，下一个难题是查找在 HoloLens 上播放此视频的方式。 我们开发了多种策略来避免解码成本，同时还使用户看起来像是查看整个视频。

最简单的优化是避免对不会更改的视频部分进行解码。 我们编写了一个工具，用于识别每个场景中几乎有无运动的区域。 对于这些区域，我们会显示静态图像，而不是每个帧解码视频。 为此，我们将大的视频分为多个较小的块。

我们还确保我们解码的每个像素都已最有效地使用。 我们 vspackage 压缩技术来减小视频的大小;我们根据要投影到的几何图形的多边形拆分视频区域;我们根据所包含的不同多边形的详细程度调整了 Uv-11 和 repacked 视频。 这样做的结果是，在单个8k 视频变成了多个块的情况下启动的内容，直到将它们正确地重新投影到场景中为止。 对于理解纹理映射和 UV 封装的游戏开发人员，这可能很熟悉。 

![优化前 Pantheon 的完整视图。](images/pantheon-before-optimization-500px.png) 

优化前 Pantheon 的完整视图。 


![Pantheon 的右半部分，处理视频播放。](images/pantheon-process-video-playback-500px.png) 

Pantheon 的右半部分，处理视频播放。 


![优化和打包后单个视频区域的示例。](images/single-video-region-after-optimization-500px.png) 

优化和打包后单个视频区域的示例。 


我们使用的另一种技巧是避免对不是主动查看的视频解码。 在 HoloTour 中，在任何给定时刻，只能查看部分完整场景。 我们仅在 FOV)  (的视图范围内或不久内解码视频。 旋转头时，我们开始播放 FOV 中的视频区域，并停止播放其中不再存在的视频区域。 大多数人都不会注意到这种情况，但如果您迅速翻了，您将看到视频需要一秒钟的时间，在这种情况下，您将看到一个静态图像，该图像随后会在视频准备就绪后淡回到视频。

为实现此策略，我们开发了大量视频播放系统。 我们优化了低级播放代码，使视频切换功能极为高效。 此外，我们还必须以一种特殊的方式对我们的视频进行编码，以便随时可以快速切换到任何视频。 此播放管道需要大量的开发时间，因此我们分阶段实现。 我们开始时使用的是一个更简单的系统，但允许的设计人员和艺术家能处理体验，并使其变得更可靠，使我们能够通过最终质量栏提供。 此最终系统包含我们在 Unity 中创建的自定义工具，用于设置场景中的视频和监视播放引擎。

### <a name="recreating-near-space-objects-in-3d"></a>在三维中重新创建近空间对象

视频构成了你在 HoloTour 中看到的大部分内容，但有许多三维对象出现在靠近你的范围内，例如在 Piazza Navona 中进行绘制，Pantheon 外的 fountain，或者你为高空场景提供的热气球。 这些3D 对象非常重要，因为人机深度认知非常好地靠近，而不是太好了。 我们可以在远处远离视频，但为了使用户能够浏览其空间，并使其看起来像是真正的，附近的对象需要深度。 此方法类似于你可能在自然历史记录博物馆中看到的内容，例如，在前台使用具有物理 landscaping、植物和动物 specimens 的 diorama，但 recedes 进入背景中的巧妙屏蔽的遮罩绘图。

某些对象只是我们创建并添加到场景中的3D 资产，旨在增强体验。 绘图和热气球落在此类别中，因为我们 filmed 时它们不存在。 与游戏资产类似，它们是由团队中的3D 艺术家创建的，并相应地纹理。 我们将它们放在离您的位置附近的场景中，游戏引擎可以将其呈现给两个 HoloLens 显示器，使其显示为三维对象。

其他资产（如 Pantheon 外的 fountain）是存在于我们的视频的位置的实际对象，但若要将这些对象移出视频和3D，我们必须执行一些操作。

首先，我们需要有关每个对象的其他信息。 在与的位置上，我们的团队捕获了这些对象的很多参考资料，以便我们有足够的详细图像来准确地重新创建纹理。 此团队还执行了 [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) 扫描，该扫描从数十个2d 图像构造一个3d 模型，为我们提供了理想规模的对象模型。

处理素材时，会从视频中删除以后将替换为3D 表示形式的对象。 3D 资产基于 photogrammetry 模型，但由我们的艺术家进行了清理和简化。 对于某些对象，我们可以使用视频的某些部分（例如 fountain 上的水纹理），但大多数 fountain 现在都是3D 对象，这使用户可以在体验范围内发现深度并浏览。 这种接近空间的对象大大增加了真实意义，并有助于在虚拟位置中使用户接地。 

![删除 fountain 的 Pantheon 素材。 它将替换为3D 资产。](images/object-removal-pantheon-500px.png)

删除 fountain 的 Pantheon 素材。 它将替换为3D 资产。


## <a name="final-thoughts"></a>结束语

很明显，创建此内容比我们在此处讨论的内容更多。 有几种场景：我们喜欢 "可能的透视"，其中包括热气球的 gladiator 和 Colosseum 中的 ""，这种方法更具创造性。 我们将在将来的案例研究中解决这些情况。

我们希望在生产过程中，将解决方案共享到一些更大的挑战对于其他开发人员非常有用，并且您可以使用其中一些技术来创建您自己的 HoloLens 体验。  (如果你这样做，请确保在 [HoloLens 应用开发论坛](https://forums.hololens.com/)上与我们分享！ ) 

## <a name="about-the-authors"></a>关于作者

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <b>David Haley</b> 是一名高级开发人员，他们已经了解了有关照相机 rig 和视频播放的详细信息，而不是在 HoloTour 上使用。</td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <b>Danny Askew</b> 是一位视频音乐家，可确保您通过罗马的旅程尽可能完美。</td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <b>Jason Syltebo</b> 是一种音频设计人员，它可以确保你访问的每个目标的 soundscape，即使在你返回时也是如此。</td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <b>Travis Steiner</b> 是一位设计主管，在站点上研究和 scouted 位置、创建行程计划和定向的与。</td>
</tr>
</table>



## <a name="see-also"></a>另请参阅
* [视频： Microsoft HoloLens： HoloTour](https://www.youtube.com/watch?v=pLd9WPlaMpY)
